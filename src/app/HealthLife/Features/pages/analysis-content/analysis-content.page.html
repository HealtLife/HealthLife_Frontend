<div class="health-stats-container">
  <h2>Estadísticas de Salud</h2>

  <div class="centered-content">
    <!-- Sección de BMI (Índice de Masa Corporal) -->
    <div class="bmi-section">
      <h3>Índice de Masa Corporal (IMC):</h3>
      <p *ngIf="bmi !== null">{{ bmi.toFixed(1) }}</p>

      <form [formGroup]="healthForm">
        <label for="height">Altura (cm):</label>
        <input id="height" type="number" formControlName="height" placeholder="Introduce tu altura">

        <label for="weight">Peso (kg):</label>
        <input id="weight" type="number" formControlName="weight" placeholder="Introduce tu peso">

        <button type="button" (click)="calculateBMI()" [disabled]="healthForm.invalid">Calcular</button>
      </form>
      <p>El índice de masa corporal (IMC) es una medida que se usa para evaluar el peso en relación con la altura.</p>
    </div>

    <!-- Sección de Macronutrientes -->
    <div class="macros-section">
      <h3>Macronutrientes</h3>
      <form [formGroup]="healthForm">
        <label for="proteins"><strong>Proteínas</strong></label>
        <textarea id="proteins" formControlName="proteins" placeholder="Proteínas" readonly></textarea>

        <label for="carbohydrates"><strong>Carbohidratos</strong></label>
        <textarea id="carbohydrates" formControlName="carbohydrates" placeholder="Carbohidratos" readonly></textarea>

        <label for="fats"><strong>Grasas</strong></label>
        <textarea id="fats" formControlName="fats" placeholder="Grasas" readonly></textarea>
      </form>
      <p>Los macronutrientes son los nutrientes que nuestro cuerpo necesita en grandes cantidades para obtener energía.</p>
    </div>
  </div>

  <!-- Sección de Historial Médico -->
  <div class="medical-history-container">
    <h2>Historial Médico</h2>
    <button (click)="addingNewRecord = true">Agregar nuevo registro</button>

    <div *ngIf="medicalHistory && medicalHistory.length; else noHistory">
      <div *ngFor="let record of medicalHistory" class="medical-record">
        <p><strong>Fecha:</strong> {{ record.date }}</p>
        <p><strong>Condición:</strong> {{ record.condition }}</p>
        <p><strong>Descripción:</strong> {{ record.description }}</p>
        <button (click)="deleteRecord(record.id)">Eliminar</button>
      </div>
    </div>

    <ng-template #noHistory>
      <p>No hay registros médicos</p>
    </ng-template>

    <!-- Formulario para agregar un nuevo registro médico -->
    <div *ngIf="addingNewRecord" class="new-record-form">
      <h3>Agregar nuevo registro médico</h3>
      <form [formGroup]="newRecordForm" (ngSubmit)="addNewRecord()">
        <label>Fecha</label>
        <input formControlName="date" type="date" required>

        <label>Condición</label>
        <input formControlName="condition" type="text" required>

        <label>Descripción</label>
        <textarea formControlName="description" required></textarea>

        <button type="submit">Guardar</button>
        <button type="button" (click)="addingNewRecord = false">Cancelar</button>
      </form>
    </div>
  </div>
</div>
